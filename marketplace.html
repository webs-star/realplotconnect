<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 
 <meta name="google-site-verification" content="U5XTc52kcwPqUunl-p9uagUoK3-O9wwGZhr7G1fL2bo" />
  <!-- Title and SEO -->
<title>RealPlot Kenya ‚Äì Find Plots, Houses & Rentals Near You</title>

<meta name="description" content="Discover affordable plots, houses, and rentals across Kenya with RealPlot Connect. Use the live map to search by location, apply filters, and get real-time voice-guided directions to properties near you." />

<meta name="keywords" content="plots for sale Kenya, houses for rent Kenya, cheap rentals Kenya, buy land Kenya, affordable property Kenya, real estate Kenya, rental listings Kenya, property map Kenya, Mtwapa plots, Nairobi rentals, land for sale Mombasa, apartments Kenya, homes for sale Kenya, RealPlot Connect" />

<meta name="author" content="RealPlot Connect by Webs Star" />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="https://webs-star.github.io/realestate.com/customers.html" />

<!-- Open Graph / Social Preview -->
<meta property="og:title" content="RealPlot Kenya ‚Äì Explore Plots, Houses & Rentals Near You" />
<meta property="og:description" content="Browse and find verified properties across Kenya. RealPlot Connect helps customers search, view, and navigate to land and rentals easily with voice-guided map access." />
<meta property="og:url" content="https://webs-star.github.io/realestate.com/customers.html" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_KE" />
<meta property="og:image" content="https://your-site-preview-image.jpg" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="RealPlot Kenya ‚Äì Discover Plots, Rentals & Houses for Sale" />
<meta name="twitter:description" content="Find affordable plots and rentals across Kenya using RealPlot‚Äôs live property map with filters and voice-guided directions." />
<meta name="twitter:image" content="https://your-site-preview-image.jpg" />

<!-- Geo Tags for Local SEO -->
<meta name="geo.region" content="KE" />
<meta name="geo.placename" content="Kenya" />
<meta name="geo.position" content="-1.2921;36.8219" />
<meta name="ICBM" content="-1.2921,36.8219" />

<!-- Schema.org JSON-LD for Rich Search Results -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "RealPlot Connect ‚Äì Property Finder Kenya",
  "url": "https://webs-star.github.io/realestate.com/customers.html",
  "description": "A free property finder tool in Kenya to discover plots, land, and rentals with map navigation and voice-guided directions.",
  "applicationCategory": "RealEstateApplication",
  "operatingSystem": "All",
  "publisher": {
    "@type": "Organization",
    "name": "Webs Star"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "KES"
  },
  "areaServed": "KE",
  "inLanguage": "en"
}
</script>

<link rel="icon" href="favicon.ico" />


  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.min.js"></script>


  <style>
    body { font-family: Arial; background: #f4f4f4; padding: 20px; }
    h2 {
      text-align: center;
      background: #0056b3;
      color: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .card, .filters {
      background: white; padding: 20px; border-radius: 8px;
      box-shadow: 0 2px 6px #ccc; max-width: 800px; margin: 20px auto;
    }
    input, select, button {
      width: 100%; margin-top: 10px; padding: 10px;
    }
    img.property {
      width: 100%; margin-bottom: 10px; border-radius: 10px;
    }
   
   
  #listings {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-top: 40px;
}

.listing-card {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  width: 300px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
}

.image-column {
  display: flex;
  flex-direction: column;
  gap: 5px;
  margin-bottom: 8px;
}

.image-column img {
  width: 100%;
  height: 100px;
  object-fit: cover;
  border-radius: 8px;
}

.listing-card h4,
.listing-card p {
  margin: 2px 0;
  padding: 0;
  font-size: 14px;
}

ul.description {
  background: #f0f0f0;
  border-radius: 5px;
  font-size: 13px;
  line-height: 1.4;
  padding: 6px 10px;
  margin: 6px 0;
  color: #000;

  max-height: 200px;
  overflow-y: auto;
}

.listing-card button {
  padding: 6px 10px;
  border: none;
  border-radius: 5px;
  font-size: 13px;
  cursor: pointer;
  margin-top: 4px;
}

.edit-btn {
  background: #28a745;
  color: white;
  margin-right: 6px;
}

.delete-btn {
  background: #dc3545;
  color: white;
}

 
    .bold-info {
    font-weight: bold;
    font-size: 1.2em;
  }

  .type    { color: #007BFF; }  /* Blue */
  .purpose { color: #28A745; }  /* Green */
  .location { color: #6F42C1; } /* Purple */
  .price   { color: #DC3545; }  /* Red */
  .contact { color: #FFC107; } /* Yellow/Orange */
  </style>
</head>
<body>

<div class="filters">
  <h3>üîç Filter Listings</h3>
  <div style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
    <select id="filterType">
      <option value="">All Types</option>
      <option value="land">Land / Plots</option>
      <option value="house">House</option>
      <option value="apartment">Apartment / Flat</option>
      <option value="bungalow">Bungalow</option>
      <option value="maisonette">Maisonette</option>
      <option value="bedsitter">Bedsitter</option>
      <option value="single room">Single Room</option>
      <option value="shop">Shop / Stall</option>
      <option value="office">Office Space</option>
      <option value="godown">Godown / Warehouse</option>
      <option value="commercial building">Commercial Building</option>
      <option value="leased">Leased Property</option>
      <option value="rental">Rental Unit</option>
      <option value="hostel">Student Hostel</option>
      <option value="farm">Farm Land</option>
      <option value="vacant land">Vacant Land</option>
      <option value="industrial">Industrial Property</option>
      <option value="resort">Resort / Hotel</option>
    </select>
    
    
<select id="filterPurpose">
  <option value="">All Purposes</option>
  <option value="sale">For Sale</option>
  <option value="rent">For Rent</option>
  <option value="lease">For Lease</option>
  <option value="bnb">For BnB</option>
</select>

    
    
    <select id="filterLocation">
      <option value="">All Counties</option>
      <option value="Mombasa">Mombasa</option><option value="Kwale">Kwale</option><option value="Kilifi">Kilifi</option><option value="Tana River">Tana River</option><option value="Lamu">Lamu</option><option value="Taita-Taveta">Taita-Taveta</option><option value="Garissa">Garissa</option><option value="Wajir">Wajir</option><option value="Mandera">Mandera</option><option value="Marsabit">Marsabit</option><option value="Isiolo">Isiolo</option><option value="Meru">Meru</option><option value="Tharaka-Nithi">Tharaka-Nithi</option><option value="Embu">Embu</option><option value="Kitui">Kitui</option><option value="Machakos">Machakos</option><option value="Makueni">Makueni</option><option value="Nyandarua">Nyandarua</option><option value="Nyeri">Nyeri</option><option value="Kirinyaga">Kirinyaga</option><option value="Murang'a">Murang'a</option><option value="Kiambu">Kiambu</option><option value="Turkana">Turkana</option><option value="West Pokot">West Pokot</option><option value="Samburu">Samburu</option><option value="Trans Nzoia">Trans Nzoia</option><option value="Uasin Gishu">Uasin Gishu</option><option value="Elgeyo-Marakwet">Elgeyo-Marakwet</option><option value="Nandi">Nandi</option><option value="Baringo">Baringo</option><option value="Laikipia">Laikipia</option><option value="Nakuru">Nakuru</option><option value="Narok">Narok</option><option value="Kajiado">Kajiado</option><option value="Kericho">Kericho</option><option value="Bomet">Bomet</option><option value="Kakamega">Kakamega</option><option value="Vihiga">Vihiga</option><option value="Bungoma">Bungoma</option><option value="Busia">Busia</option><option value="Siaya">Siaya</option><option value="Kisumu">Kisumu</option><option value="Homa Bay">Homa Bay</option><option value="Migori">Migori</option><option value="Kisii">Kisii</option><option value="Nyamira">Nyamira</option><option value="Nairobi">Nairobi</option>
    </select>
    <input type="number" id="minPrice" placeholder="Min KES" />
    <input type="number" id="maxPrice" placeholder="Max KES" />
    <button onclick="loadListings()">Apply Filters</button>
  </div>
</div>

<h2>üè† RealPlot Connect ‚Äì View Properties</h2>
<div id="listings"></div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDLTAd2u0IlhA4Gm4-0tTSzLUDHFYj045g",
    authDomain: "realestate-afbe6.firebaseapp.com",
    databaseURL: "https://realestate-afbe6-default-rtdb.firebaseio.com",
    projectId: "realestate-afbe6",
    storageBucket: "realestate-afbe6.appspot.com",
    messagingSenderId: "202970291965",
    appId: "1:202970291965:web:baaf253d6c9a8685c5e894"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let currentUserLatLng = null;

  navigator.geolocation.getCurrentPosition(
    pos => {
      currentUserLatLng = L.latLng(pos.coords.latitude, pos.coords.longitude);
    },
    () => alert("Location access denied.")
  );

 function loadListings() {
  const filterType = document.getElementById("filterType").value;
  const filterLocation = document.getElementById("filterLocation").value;
  const minPrice = parseInt(document.getElementById("minPrice").value) || 0;
  const maxPrice = parseInt(document.getElementById("maxPrice").value) || Infinity;
   const filterPurpose = document.getElementById("filterPurpose").value.toLowerCase().trim();

  db.ref("listings").once("value", snapshot => {
    const data = snapshot.val();
    const listingsDiv = document.getElementById("listings");
    listingsDiv.innerHTML = "";

    if (!data) {
      listingsDiv.innerHTML = "<p>No listings found.</p>";
      return;
    }

    const sortedEntries = Object.entries(data).sort((a, b) => {
      const tA = a[1].timestamp || 0;
      const tB = b[1].timestamp || 0;
      return tB - tA; // newest first
    });
 for (const [id, item] of sortedEntries) {
 const itemType = (item.type || "").toLowerCase().trim();
const itemLocation = (item.location || "").toLowerCase().trim();
const itemPurpose = (item.purpose || "").toLowerCase().trim(); // ‚úÖ only once

const filterTypeVal = filterType.toLowerCase().trim();

const filterLoc = filterLocation.toLowerCase().trim();

const itemLocationWords = itemLocation.split(/[\s,-]+/);
const filterWords = filterLoc.split(/[\s,-]+/);

const locationMatch = filterLoc === "" || filterWords.some(word =>
  itemLocationWords.includes(word)
);
const typeMatch = filterType === "" || itemType.includes(filterTypeVal);
const purposeMatch = filterPurpose === "" || itemPurpose === filterPurpose;

const priceMatch = item.price >= minPrice && item.price <= maxPrice;

if (!typeMatch || !purposeMatch || !locationMatch || !priceMatch) continue;


  // Continue with rendering the card...



const card = document.createElement("div");
card.className = "listing-card";
card.innerHTML = `
  <p><strong>Type:</strong> <span class="bold-info type">${item.type}</span></p>
  <p><strong>Purpose:</strong> <span class="bold-info purpose">${item.purpose || "N/A"}</span></p>
  <p><strong>Location:</strong> <span class="bold-info location">${item.location}</span></p>
  <p><strong>Price:</strong> <span class="bold-info price">KES ${item.price}</span></p>

  <ul class="description">
    ${(item.description || "").split("\n").map(line => `<li>${line}</li>`).join("")}
  </ul>

  <p><strong>Contact:</strong> <span class="bold-info contact">${item.contact}</span></p>
`;

     
const imageArray = Array.isArray(item.images) ? item.images : [];
if (imageArray.length > 0) {
  const img = document.createElement("img");
  img.src = imageArray[0];
  img.className = "property";
  img.style.transition = "opacity 0.5s ease-in-out";
  card.appendChild(img);

  let index = 0;
  setInterval(() => {
    index = (index + 1) % imageArray.length;
    img.style.opacity = 0;
    setTimeout(() => {
      img.src = imageArray[index];
      img.style.opacity = 1;
   }, 500);
  }, 5000); // 5 seconds
}



     const mapId = "map-" + id;

// Show Directions button
const btn = document.createElement("button");
btn.textContent = "üìç Show Directions";
btn.onclick = () => showMapForListing(item.lat, item.lng, mapId);

// Chat button
const chatBtn = document.createElement("button");
chatBtn.textContent = "üí¨ Chat with Landlord/Landowner/Agent";
chatBtn.style.background = "#ff9800";
chatBtn.style.color = "white";
chatBtn.style.marginTop = "5px";
chatBtn.style.borderRadius = "5px";
chatBtn.onclick = () => openChat(item.contact, item.location, item.type, id);
// Map container
const mapDiv = document.createElement("div");
mapDiv.id = mapId;

// Append to card
card.appendChild(btn);
card.appendChild(chatBtn); // ‚úÖ new chat button
card.appendChild(mapDiv);
listingsDiv.appendChild(card);

    }
  });
}


function showMapForListing(destLat, destLng, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = "";

    const mapDiv = document.createElement("div");
    mapDiv.style.height = "300px";
    mapDiv.style.marginTop = "10px";
    mapDiv.style.borderRadius = "10px";
    container.appendChild(mapDiv);

    const directionsList = document.createElement("div");
    directionsList.className = "directions-text";
    directionsList.style.marginTop = "10px";
    directionsList.style.padding = "10px";
    directionsList.style.background = "#f9f9f9";
    directionsList.style.borderRadius = "8px";
    // ‚≠ê Initial message changed to show the long wait time
    directionsList.innerHTML = "<strong>Directions:</strong><br><em>Acquiring location... (This may take up to 20 seconds on mobile data)</em>";
    container.appendChild(directionsList);

    const destinationLatLng = L.latLng(destLat, destLng);
    
    let map = null;
    let userMarker = null;
    let routeControl = null;
    let straightLine = null;
    
    // --- STEP 1: Define the Routing Logic ---

    function createRoute(userLatLng) {
        // Cleanup previous layers
        if (routeControl) { map.removeControl(routeControl); routeControl = null; }
        if (straightLine) { map.removeLayer(straightLine); straightLine = null; }

        directionsList.innerHTML = "<strong>Directions:</strong><br><em>Calculating best road route...</em>";

        // Create the road routing control
        routeControl = L.Routing.control({
            waypoints: [userLatLng, destinationLatLng],
            routeWhileDragging: false,
            addWaypoints: false,
            createMarker: () => null,
            show: false,
            lineOptions: {
                styles: [{ color: 'blue', weight: 4, opacity: 0.8 }]
            }
        }).addTo(map);

        // --- Routing Error Handler (The critical fallback) ---
        routeControl.on('routingerror', function (e) {
            console.error("Road Routing Error:", e.error);
            
            // Immediately trigger straight-line fallback on failure
            straightLineFallback(userLatLng);
        });

        // --- Routing Success Handler ---
        routeControl.on('routesfound', function (e) {
            const route = e.routes[0];
            const distanceKm = (route.summary.totalDistance / 1000).toFixed(2);
            const timeMin = (route.summary.totalTime / 60).toFixed(0);

            let steps = `<strong>Live Step-by-Step Directions:</strong><br>`;
            const instructions = route.instructions || [];

            const formatter = new L.Routing.Formatter();
            if (instructions.length === 0 && route.instructions === undefined) {
                route.instructions = formatter._getInstructions.call({options:{}}, route);
            }

            for (const step of route.instructions || []) {
                if (step.text) {
                    steps += `‚û°Ô∏è ${step.text} (${(step.distance / 1000).toFixed(2)} km)<br>`;
                }
            }

            steps += `<br><em>Total Distance:</em> **${distanceKm} km**<br>`;
            steps += `<em>Estimated Time:</em> **${timeMin} mins**`;

            directionsList.innerHTML = steps;
        });
    }

    function straightLineFallback(userLatLng) {
        // Fallback cleanup (in case an error occurred mid-route draw)
        if (routeControl) { map.removeControl(routeControl); routeControl = null; }
        
        const distanceToDestination = userLatLng.distanceTo(destinationLatLng);
        
        // Draw the straight line
        straightLine = L.polyline([userLatLng, destinationLatLng], {
            color: 'red', 
            weight: 3, 
            dashArray: '10, 10', 
            opacity: 0.8
        }).addTo(map);

        directionsList.innerHTML = `
            ‚ùå <strong>Road Route Failed!</strong><br>
            Showing **Straight Line Distance:** **${(distanceToDestination / 1000).toFixed(2)} km** (${distanceToDestination.toFixed(0)}m)<br>
            <em>This often happens due to a poor 3G/4G signal. You must navigate the rest of the way manually.</em>
        `;
    }

    // --- STEP 2: Acquire Location (Using Single, Robust Request) ---

    // We use getCurrentPosition instead of watchPosition for one stable fix.
    navigator.geolocation.getCurrentPosition(
        pos => {
            const userLatLng = L.latLng(pos.coords.latitude, pos.coords.longitude);
            const accuracyMeters = pos.coords.accuracy;

            // 1. Initialize the map now that we have a location
            map = L.map(mapDiv).setView(userLatLng, 15);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

            L.marker(destinationLatLng).addTo(map).bindPopup("Listing Location");

            // 2. Add User Marker
            userMarker = L.marker(userLatLng, {
                icon: L.icon({
                    iconUrl: "https://cdn-icons-png.flaticon.com/512/684/684908.png",
                    iconSize: [25, 25],
                    iconAnchor: [12, 12]
                })
            }).addTo(map).bindPopup(`You are here (Accuracy: ${accuracyMeters.toFixed(0)}m)`);
            
            // 3. Immediately attempt road routing
            createRoute(userLatLng);

            // 4. Implement a simple watching logic for updates (optional but helpful)
            // This re-attempts the route every 30 seconds if successful
            setInterval(() => {
                navigator.geolocation.getCurrentPosition(
                    updatePos => {
                        const updatedLatLng = L.latLng(updatePos.coords.latitude, updatePos.coords.longitude);
                        userMarker.setLatLng(updatedLatLng).bindPopup(`Updated Location (Acc: ${updatePos.coords.accuracy.toFixed(0)}m)`);
                        map.panTo(updatedLatLng);
                        
                        // Only re-route if accuracy is decent (e.g., < 150m) to avoid errors
                        if (updatePos.coords.accuracy < 150) {
                            createRoute(updatedLatLng);
                        } else {
                            straightLineFallback(updatedLatLng); // Fallback if update is poor
                        }
                    },
                    () => { /* ignore update errors */ },
                    { enableHighAccuracy: false, timeout: 10000 }
                );
            }, 30000); // Check for location update every 30 seconds

        },
        err => {
            // Geolocation Failure (Failed to get location within 20s)
            directionsList.innerHTML = `
                ‚ùå <strong>Location Tracking Failed!</strong><br>
                **Error:** ${err.message}. Failed to get position within 20 seconds.
                <br><em>Please check if location services are enabled or try moving to an open area.</em>
            `;
        },
        {
            enableHighAccuracy: true,
            maximumAge: 0,
            // ‚≠ê Final attempt at a long timeout for 3G/4G
            timeout: 20000 
        }
    );
}
window.onload = () => {
  loadListings();
};


function openChat(contact, location, type, listingId) {
  const message = prompt(`üí¨ Start chatting with the landlord of this ${type} in ${location}.\n\nType your message below:`);

  if (!message) return;

  const phoneNumber = contact.replace(/\D/g, '');

  const linkToListing = `https://webs-star.github.io/realestate.com/customers.html?listing=${listingId}`;

  const preFilled = `Hello, I'm interested in the ${type} located in ${location}. I saw your listing on *RealPlot Connect*.\n\n${message}\n\nüîó View listing: ${linkToListing}`;
  const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(preFilled)}`;

  window.open(whatsappURL, "_blank");
}



  
</script>

</body>
</html>
